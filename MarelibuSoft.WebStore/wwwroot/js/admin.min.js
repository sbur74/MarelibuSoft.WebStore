if(!marelibusoft)var marelibusoft={};marelibusoft.admin||(marelibusoft.admin={});marelibusoft.admin.categoryIndexer=0;marelibusoft.admin.getCategories=function(){marelibusoft.admin.categoryIndexer++;$.ajax("/api/AdminCategories",{type:"GET",contentType:"application/json",dataType:"json",timeout:6e4,success:function(n){var t=n;marelibusoft.admin.renderCatgories(t)},error:function(){alert("fehler")}})};marelibusoft.admin.getCategorySubs=function(n){var t=n,i="/api/AdminCategorySubs/Category/"+t;$.ajax(i,{type:"GET",contentType:"application/json",dataType:"json",timeout:6e4,success:function(n){var t=n;marelibusoft.admin.renderSubs(t)},error:function(){alert("Fehler")}})};marelibusoft.admin.getCategoryDetails=function(n){var t=n,i="/api/AdminCategoryDetails/Sub/"+t;$.ajax(i,{type:"GET",contentType:"application/json",dataType:"json",timeout:6e4,success:function(n){var t=n;marelibusoft.admin.renderDetails(t)},error:function(n){alert(n)}})};marelibusoft.admin.renderCatgories=function(n){var t=marelibusoft.admin.categoryIndexer,r=$("#tableBody"),u=$("#categories_"+t),i="",f,e;u.length===0?(i+="<div id='row_"+t+"' class='row' ><div id='div_categories_"+t+"' class='col-sm-3'><select id='categories_"+t+"' class='form-control' onchange='marelibusoft.admin.getCategorySubs(this.value)'>",i+=marelibusoft.admin.renderOptions(n),i+="<\/select><\/div><div id='subs_"+t+"' class='col-sm-3'><\/div><div id='details_"+t+"' class='col-sm-3' ><\/div><div id='deleterow_"+t+"' class='col-sm-3'><button class='btn btn-danger' onclick='marelibusoft.admin.deleteRow(\"row_"+t+"\")'>Zeile L&ouml;schen<\/button><\/div><\/div>",r.append(i)):(u.empty(),i+=marelibusoft.admin.renderOptions(n),u.append(),f=$("#categorysubs_"+t),f.length>0&&(f.empty(),r.remove("#categorysubs_"+t)),e=$("#categorydetails_"+t),e.length>0&&(e.empty(),r.remove("#categorydetails_"+t)))};marelibusoft.admin.renderSubs=function(n){var t=marelibusoft.admin.categoryIndexer,f=$("#row_"+t),r=$("#categorysubs_"+t),i="",u;r.length===0?(i+="<select id='categorysubs_"+t+"' class='form-control' onchange='marelibusoft.admin.getCategoryDetails(this.value)'>",i+=marelibusoft.admin.renderOptions(n),i+="<\/select>",$("#subs_"+t).append(i)):(r.empty(),i+=marelibusoft.admin.renderOptions(n),r.append(i),u=$("#categorydetails_"+t),u.length>0&&(u.empty(),f.remove("#categorydetails_"+t)))};marelibusoft.admin.renderDetails=function(n){var i=marelibusoft.admin.categoryIndexer,u=$("#row_"+i),t="",r=$("#categorydetails_"+i);r.length===0?(t+="<select id='categorydetails_"+i+"' class='form-control'>",t+=marelibusoft.admin.renderOptions(n),t+="<\/select>",$("#details_"+i).append(t)):(r.empty(),t+=marelibusoft.admin.renderOptions(n),r.append(t))};marelibusoft.admin.renderOptions=function(n){var i="<option value=0>nicht Zugewiesen<\/option>",t;if(n)for(t=0;t<n.length;t++)i+="<option value='"+n[t].key+"'>"+n[t].value+"<\/option>";return i};marelibusoft.admin.cleareTable=function(){var n=$("#tableBody");n.empty();$("#messages").empty();marelibusoft.admin.categoryIndexer=0};marelibusoft.admin.deleteRow=function(n){$("#"+n).empty();var t=$("#tablebody");t.remove("#"+n);t.children("#tablebody").length===0&&(marelibusoft.admin.categoryIndexer=0)};marelibusoft.admin.submitTable=function(){for(var s=$("#productID"),i=s.val(),h=marelibusoft.admin.categoryIndexer+1,n=1;n<h;n++){var r=$("#categories_"+n),u=$("#categorysubs_"+n),f=$("#categorydetails_"+n),t=0,e=0,o=0;r.length>0&&(t=r.val());u.length>0&&(e=u.val());f.length>0&&(o=f.val());i>0&&t>0&&marelibusoft.admin.postAssignment(i,t,e,o)}};marelibusoft.admin.postAssignment=function(n,t,i,r){var u=JSON.stringify({productID:n,categoryID:t,categorySubID:i,categoryDetailID:r}),f=$("input[name='__RequestVerificationToken']").val();$.ajax("/api/AdminCategoryAssignments",{type:"POST",headers:{"X-XSRF-TOKEN":f},contentType:"application/json",dataType:"json",data:u,timeout:6e4,success:function(){$("#messages").empty().append('<div class="alert alert-success alert-dismissable fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a><strong>Erledigt!<\/strong> Artikel Kategorien Zuordnung angelegt<\/div>').fadeIn(3e3)},error:function(){$("#messages").empty().append('<div class="alert alert-danger alert-dismissable fade in"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a><strong>Fehler!<\/strong> Fehler, bei der Anlage.<\/div>').fadeIn(3e3).fadeOut(1500)}})};marelibusoft.admin.calculateSecondBasePrice=function(){var t=parseFloat($("#basisPrice").val().replace(",",".")),i=parseFloat($("#productwith").val().replace(",",".")),r=1*i,n=t/r;n=n.toFixed(2);n=n.replace(".",",");$("#sbPrice").val(n);$("#myModal").modal("hide")};marelibusoft.admin.sendShippingMail=function(n){console.log("marelibusoft.admin.sendShippingMail -> orderid:"+n);var t=$("input[name='__RequestVerificationToken']").val()};