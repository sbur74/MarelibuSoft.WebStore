function sendDeleteCart(){var n=$("#cartid").html(),t=$("#sessionid").html(),i=$("input[name='__RequestVerificationToken']").val(),r="api/ShoppingCarts/"+n;$.ajax(r,{type:"DELETE",headers:i,data:JSON.stringify({iD:n,sessionId:t}),success:function(){$("#cartDisplay").load("/AjaxContent/ShoppingCart")},"async":!1,contentType:"application/json",dataType:"json",timeout:6e4})}if(!marelibusoft)var marelibusoft={};marelibusoft.shop||(marelibusoft.shop={});marelibusoft.shop.lastPriceChangeVariantId=0;marelibusoft.shop.checkOption=function(n,t){var r=$("#variantSelect_"+n),u=marelibusoft.common.str2Float(r.find(":selected").attr("data-option-quantity")),i=marelibusoft.common.str2Float(r.find(":selected").attr("data-option-price")),f,e,o;u>0&&$("#variantQuantity_"+n).html(u);marelibusoft.shop.lastPriceChangeVariantId==n&&($("#optionPrice").empty(),$("#optionPrice").remove(),$("#"+t+"_quantityPrice").html($("#grundPreis").html()));i>0&&(marelibusoft.shop.lastPriceChangeVariantId=n,f=marelibusoft.common.str2Float($("#grundPreis").html()),$("#optionPrice").empty(),$("#optionPrice").remove(),$("#optionPriceTableBody").append("<tr id='optionPrice'><td> + <\/td><td>"+marelibusoft.common.float2LocalCurrencyString(i)+"<\/td><\/tr>"),e=f+i,o=marelibusoft.common.float2LocalCurrencyString(e),$("#"+t+"_quantityPrice").html(o))};marelibusoft.shop.sendCartLine=function(n,t,i){var y=$("#cartid").html(),p=$("input[name='__RequestVerificationToken']").val(),e=n,w=marelibusoft.common.str2Float(i),b=$("#"+e+"_sellActionItemId").val(),c=marelibusoft.common.str2Float($("#"+e+"_quantity").val()),l=$("#textOptionInput"),r={shoppingCartID:y,quantity:c,productID:e,unitID:t,sellBasePrice:w,sellActionItemId:b,shoppingCartLineTextOptions:[],variantValues:[]},o,s,h,u,v;if(l.length>0){if(!marelibusoft.shop.checkTextVariant())return;o=l.val();txtOption={text:o};r.shoppingCartLineTextOptions.push(txtOption);r.textVariant=o}if(s=$("#variants"),s)for(h=s.find("select"),u=0;u<h.length;u++){var k=h[u].getAttribute("id"),f=$("#"+k),d=f.attr("data-variant-id"),g=f.find(":selected").attr("data-option-price"),a=f.find(":selected").attr("data-option-id"),nt=f.find(":selected").val();a&&(v={productVariant:d,productVariantOption:a,price:g,value:nt,quantity:c},r.variantValues.push(v))}$.ajax("/api/ShoppingCartLines/variant",{type:"POST",headers:{"X-XSRF-TOKEN":p},data:JSON.stringify(r),success:function(n){console.log(n);getAvailableQuantity(n);$("#cartDisplay").load("/AjaxContent/ShoppingCart");marelibusoft.common.showModalAlert("alert","Erfolgreich angelegt!","success")},error:function(){$("#cartDisplay").load("/AjaxContent/ShoppingCart");marelibusoft.common.showModalAlert("alert","Bei der Anlage ist ein Fehler aufgetreten!","danger");setTimeout(location.reload(),800)},contentType:"application/json",timeout:6e4})};marelibusoft.shop.checkTextVariant=function(){var r=$("#textOptionInput"),i,n,t;if(r.length>0){if(i=r.val(),i.length==0)return marelibusoft.shop.showTextInputError(),!1;if(n=i.split(" "),n.length>1){for(t=0;t<n.length;t++)if(n[t].length>0)return marelibusoft.shop.hideTextInputError(),!0;return marelibusoft.shop.showTextInputError(),!1}return marelibusoft.shop.hideTextInputError(),!0}};marelibusoft.shop.showTextInputError=function(){marelibusoft.common.showModalAlert("textOptionInput","Sie müssen einen Text eingeben!","danger");$("#textVariantValidate").append("Sie müssen einen Text eingeben!");$("#textOptionInput").addClass("danger")};marelibusoft.shop.hideTextInputError=function(){$("#textVariantValidate").hide();$("#textOptionInput").removeClass("danger")};